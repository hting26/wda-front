(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["adoption"],{"04a8":function(t,e,i){"use strict";i("7198")},5178:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("b-container",{attrs:{id:"donate"}},[i("h3",{staticClass:"pageTitle"},[t._v("領養 Adoption")]),i("b-icon",{directives:[{name:"b-toggle",rawName:"v-b-toggle.collapse-3",modifiers:{"collapse-3":!0}}],attrs:{icon:"caret-down",variant:"accent"}}),i("b-collapse",{attrs:{id:"collapse-3",visible:""}},[i("div",{staticClass:"pageText"},[t._v("瑪莉愛狗協會是非營利的救援組織，已經救援了數千隻狗找到幸福的家!")])]),i("b-row",{staticClass:"mt-5"},t._l(t.dogs,(function(t){return i("b-col",{key:t._id,staticClass:"my-3",attrs:{cols:"12",lg:"6"}},[i("DogCard",{attrs:{dog:t}})],1)})),1)],1)},r=[],a=i("1da1"),n=(i("96cf"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"dogscard"}},[i("b-card",{staticClass:"dogCard",attrs:{"img-top":"","img-src":t.dog.image}},[i("b-card-body",{on:{click:t.more}},[i("b-card-title",[t._v(t._s(t.dog.name))]),i("b-card-text",{staticStyle:{"white-space":"pre-line"}},[t._v(t._s(t.dog.description))])],1),i("b-card-footer",[i("b-btn",{staticClass:"mx-2",on:{click:t.more}},[t._v("閱讀更多")]),i("b-btn",{staticClass:"applyBtn mx-2",on:{click:t.apply}},[t._v("申請領養")])],1)],1),i("b-modal",{staticClass:"modalMore",attrs:{id:"modal-more"+t.dog._id,"hide-footer":"",scrollable:"",title:t.dog.name,"text-center":"","no-stacking":""}},[i("img",{staticClass:"moreImg",staticStyle:{width:"100%"},attrs:{src:t.dog.image}}),i("p",{staticStyle:{"white-space":"pre-line",margin:"2rem 0"}},[t._v(t._s(t.dog.description))]),i("b-btn",{staticClass:"applyBtn",on:{click:t.apply}},[t._v("申請領養")])],1),i("b-modal",{attrs:{title:"申請領養",id:"modal-apply"+t.dog._id,"ok-disabled":t.modalSubmitting,"cancel-disabled":t.modalSubmitting,"ok-variant":"accent","cancel-variant":"light","ok-title":"送出","cancel-title":"取消"},on:{ok:t.submitApply,hidden:t.resetForm}},[i("div",{staticClass:"my-3"},[i("img",{staticClass:"mx-auto img-fluid d-block mb-3",staticStyle:{width:"230px"},attrs:{src:t.dog.image}}),i("h6",{staticClass:"text-center"},[t._v(t._s(t.dog.name))])]),i("b-form-group",{attrs:{label:"申請人姓名","label-for":"input-name",description:"必填欄位","invalid-feedback":"申請人姓名必填",state:t.state.name}},[i("b-form-input",{attrs:{id:"input-name",type:"text",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),i("b-form-group",{attrs:{label:"連絡電話","label-for":"input-phone",description:"必填欄位",state:t.state.phone}},[i("b-form-input",{attrs:{id:"input-phone",type:"text",required:""},model:{value:t.form.phone,callback:function(e){t.$set(t.form,"phone",e)},expression:"form.phone"}})],1),i("b-form-group",{attrs:{label:"詳細說明","label-for":"input-description",description:"必填欄位","invalid-feedback":"詳細說明必填",state:t.state.description}},[i("b-form-textarea",{attrs:{id:"input-description",rows:"6",required:"",placeholder:"請介紹一下自己並詳細說明欲領養的動機"},model:{value:t.form.description,callback:function(e){t.$set(t.form,"description",e)},expression:"form.description"}})],1)],1)],1)}),s=[],c=(i("b0c0"),i("a4d3"),i("e01a"),i("f90c")),l=i.n(c),d={data:function(){return{form:{name:"",phone:"",description:"",dog:"",status:"已送出"},modalSubmitting:!1}},props:{dog:{type:Object,required:!0}},computed:{state:function(){return{name:0!==this.form.name.length||null,phone:0===this.form.phone?null:l.a.isNumeric(this.form.phone),description:0!==this.form.description.length||null}}},methods:{submitApply:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function i(){return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(t.preventDefault(),e.state.name&&e.state.phone&&e.state.description){i.next=4;break}return e.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),i.abrupt("return");case 4:return e.modalSubmitting=!0,i.prev=5,i.next=8,e.api.post("/adoptions",e.form,{headers:{authorization:"Bearer "+e.user.token}});case 8:e.$swal({icon:"success",title:"成功",text:"申請已送出"}),e.form={name:"",phone:"",description:"",dog:""},e.$bvModal.hide("modal-apply"+e.dog._id),e.modalSubmitting=!1,i.next=17;break;case 14:i.prev=14,i.t0=i["catch"](5),e.$swal({icon:"error",title:"失敗",text:"申請送出失敗"});case 17:case"end":return i.stop()}}),i,null,[[5,14]])})))()},apply:function(){this.$bvModal.show("modal-apply"+this.dog._id),this.form.dog=this.dog._id},more:function(){this.$bvModal.show("modal-more"+this.dog._id),this.form.dog=this.dog._id},resetForm:function(t){this.modalSubmitting?t.preventDefault():this.form={name:"",phone:"",description:"",dog:""}}}},p=d,m=(i("04a8"),i("2877")),u=Object(m["a"])(p,n,s,!1,null,null,null),b=u.exports,f={components:{DogCard:b},data:function(){return{dogs:[]}},methods:{showMsgOk:function(){var t=this.$createElement,e=t("div",{domProps:{innerHTML:"Title from <i>HTML<i> string"}}),i=t("div",{class:["foobar"]},[t("p",{class:["text-center"]},[" Flashy ",t("strong","msgBoxOk")," message "]),t("b-img",{props:{src:"https://picsum.photos/id/20/250/250",thumbnail:!0,center:!0,fluid:!0,rounded:"circle"}})]);this.$bvModal.msgBoxOk([i],{title:[e],buttonSize:"sm",centered:!0,size:"sm"})}},created:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var i,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.api.get("/dogs");case 3:i=e.sent,o=i.data,t.dogs=o.result,e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$swal({icon:"error",title:"錯誤",text:"取得失敗"});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}},g=f,h=(i("699c"),Object(m["a"])(g,o,r,!1,null,null,null));e["default"]=h.exports},"699c":function(t,e,i){"use strict";i("e578")},7198:function(t,e,i){},b0c0:function(t,e,i){var o=i("83ab"),r=i("5e77").EXISTS,a=i("e330"),n=i("9bf2").f,s=Function.prototype,c=a(s.toString),l=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,d=a(l.exec),p="name";o&&!r&&n(s,p,{configurable:!0,get:function(){try{return d(l,c(this))[1]}catch(t){return""}}})},e01a:function(t,e,i){"use strict";var o=i("23e7"),r=i("83ab"),a=i("da84"),n=i("e330"),s=i("1a2d"),c=i("1626"),l=i("3a9b"),d=i("577e"),p=i("9bf2").f,m=i("e893"),u=a.Symbol,b=u&&u.prototype;if(r&&c(u)&&(!("description"in b)||void 0!==u().description)){var f={},g=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:d(arguments[0]),e=l(b,this)?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};m(g,u),g.prototype=b,b.constructor=g;var h="Symbol(test)"==String(u("test")),v=n(b.toString),x=n(b.valueOf),y=/^Symbol\((.*)\)[^)]+$/,w=n("".replace),k=n("".slice);p(b,"description",{configurable:!0,get:function(){var t=x(this),e=v(t);if(s(f,t))return"";var i=h?k(e,7,-1):w(e,y,"$1");return""===i?void 0:i}}),o({global:!0,forced:!0},{Symbol:g})}},e578:function(t,e,i){}}]);
//# sourceMappingURL=adoption.23a11f7f.js.map